## Django 定时任务

#### warming up

```python
===========================================================
crontab的定时书写格式：
f1     f2　　 f3　   f4　  　f5　　

分　    时    日    　月　  　周

第一列f1代表分钟1~59：
  当f1为*表示每分钟都要执行；
  为*/n表示每n分钟执行一次；
  为[a-b]表示从第a分钟到第b分钟这段时间要执行；
  为a,b,c,...表示第a,b,c分钟要执行

第二列f2代表小时0~23(0表示凌晨)：
  当f2为*表示每小时都要执行；
  为*/n表示每n小数执行一次；
  为a-b表示从第a小时到第b小时这段时间要执行；
  为a,b,c,...表示第a,b,c小时要执行

第三列f3代表日1~31：含义如上所示，以此类推

第四列f4代表月1~12：含义如上所示，以此类推

第五列f5代表星期0~6（0表示星期天）
============================================================
```

安装定时任务包：

```
pip install django-crontab
```

设置settings.py

```
INSTALLED_APPS = (
    'django_crontab',
    ...
)
```

在django项目的**settings.py**中添加以下命令

```python
CRONJOBS = (
    ('*/1 * * * *', '你的app名.定时函数所在的py文件名.定时函数名'),
    ('0   0 1 * *', '你的app名.定时函数所在的py文件名.定时函数名', '> 输出文件路径和名称'),
)
```

- 第一种的意思就是每一分钟执行一次你的定时函数
- 第二种时定时函数输出的内容到指定文件（如果该路径或文件不存在将会自动创建）

以上都完成后，需要执行一下命令

- 将任务添加并生效
   python manage.py crontab add

- 显示当前的定时任务
   python manage.py crontab show

- 删除所有定时任务
   python manage.py crontab remove

  



